<!DOCTYPE html>
<html >
    
    <head>
        <meta charset="UTF-8">   
        <title>Robot Arm</title>
        
        <script src='https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.0.4/socket.io.js'></script>
        
    </head>
    <body>
        
          
        <h1 style="text-align:center;">Communicating from Node.js to an Arduino Prototype</h1>
        <p style="text-align:center;">Project members: Aiden, Leo, Neil, Douglas, Brandon</p>

        <h2>Macro Control</h2>

        <h2>Manual Control</h2>
        <button id="servo1To180">180</button>
        <button id="servo1To0">0</button>

        <div class="slidecontainer">
            <input type="range" min="0" max="180" value="90" class="slider" id="myRange">
          </div>
        <button id="lightOn">Light On</button>
        <button id="lightOff">Light Off</button>
        
        <p>Project members: Aiden, Leo, Neil, Douglas, Brandon</p>
        <script>
        
        // Update the current slider value (each time you drag the slider handle)
        function setIntString(int){
            try{
                if(int >=1000 || int - Math.floor(int) != 0){
                    return new Error("setIntString received an invalid number")
                }

                if(int < 10){
                    return "0"+"0"+int.toString();
                }else if(int <100){
                    return "0"+int.toString();
                }else{
                    return int.toString();
                }
            }
            catch(err){
                
            }
            return new Error("setIntString received a non-numer");
        }

        document.getElementById("myRange").oninput = function() {

            socket.emit('dataIn', { "status":"!1:"+setIntString(this.value) });
        }
        
        var socket = io();

        document.getElementById('servo1To180').onclick = function() {
            
            socket.emit('dataIn', { "status":"!1:180" });         
        };
            
        document.getElementById('servo1To0').onclick = function(){
               
            socket.emit('dataIn', { "status":"!1:000" });         
        };

        document.getElementById('lightOn').onclick = function(){   
            socket.emit('dataIn', { "status":"!L:III" });  
        };

        document.getElementById('lightOff').onclick = function(){      
            socket.emit('dataIn', { "status":"!L:OOO" });
        };
        
        </script>
        
    </body>
</html>
